<!DOCTYPE html>
<html>
<head>
    <title>–õ–∞–±–∞ 4</title>
    <style>
        .task { border: 2px solid #ccc; padding: 20px; margin: 20px 0; }
        .macros-box { border: 2px solid; padding: 10px; margin: 10px; }
        .lab-title { color: #333; border-bottom: 3px solid; padding-bottom: 10px; }
        .button {
            padding: 8px 15px;
            text-decoration: none;
            border-radius: 4px;
            margin: 5px;
            display: inline-block;
        }
        .button-primary { background: #4CAF50; color: white; }
        .button-secondary { background: #2196F3; color: white; }
        .button-light { background: #f0f0f0; color: black; }
        .button-nav { margin-top: 20px; padding-top: 15px; border-top: 1px solid #eee; }
    </style>
</head>
<body>
    <!-- ===== –õ–ê–ë–ê 3: –í–´–í–û–î –î–ê–ù–ù–´–• –° JINJA ===== -->
    {% if task == 'lab3' or (r is defined or numbers is defined or val is defined) %}
    <div class="lab-title" style="border-color: purple;">
        <h1>–õ–∞–±–∞ 3: –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö —Å Jinja</h1>
    </div>

    {# –ó–∞–¥–∞–Ω–∏–µ 1 #}
    {% if r is defined and pi is defined %}
        <div class="task" style="border-color: blue;">
            <h2>–ó–∞–¥–∞–Ω–∏–µ 1: –ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞</h2>
            <p>–†–∞–¥–∏—É—Å r = {{ r }}</p>
            <p>œÄ = {{ pi }}</p>
            <p><strong>–ü–ª–æ—â–∞–¥—å:</strong> S = œÄ √ó r¬≤ = {{ pi }} √ó {{ r }}¬≤ = {{ pi * (r ** 2) }}</p>

            <div class="button-nav">
                <a href="/" class="button button-light">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="/macros_test/" class="button button-secondary">üß© –ö –õ–∞–±–µ 4</a>
                <a href="/circle_area/10.0/" class="button button-primary">üìê –î—Ä—É–≥–æ–π —Ä–∞–¥–∏—É—Å (10)</a>
            </div>
        </div>

    {# –ó–∞–¥–∞–Ω–∏–µ 2 #}
    {% elif numbers is defined %}
        <div class="task" style="border-color: green;">
            <h2>–ó–∞–¥–∞–Ω–∏–µ 2: –†–∞–±–æ—Ç–∞ —Å –∫–æ—Ä—Ç–µ–∂–µ–º</h2>
            <p>–ö–æ—Ä—Ç–µ–∂: {{ numbers }}</p>
            <p>–ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç: {{ numbers[0] }}</p>
            <p>–ü–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç: {{ numbers[-1] }}</p>
            <p>–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ: {{ numbers|min }}</p>
            <p>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ: {{ numbers|max }}</p>
            <p><strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong>
               ({{ numbers[0] }} + {{ numbers[-1] }}) - ({{ numbers|min }} + {{ numbers|max }}) =
               {{ (numbers[0] + numbers[-1]) - (numbers|min + numbers|max) }}
            </p>

            <div class="button-nav">
                <a href="/" class="button button-light">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="/macros_test/" class="button button-secondary">üß© –ö –õ–∞–±–µ 4</a>
                <a href="/round_number/3.14159/" class="button button-primary">üî¢ –ö –∑–∞–¥–∞–Ω–∏—é 3</a>
            </div>
        </div>

    {# –ó–∞–¥–∞–Ω–∏–µ 3 #}
    {% elif val is defined %}
        <div class="task" style="border-color: orange;">
            <h2>–ó–∞–¥–∞–Ω–∏–µ 3: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞</h2>
            <p>–ò—Å—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: "{{ val }}"</p>
            <p>–ö–∞–∫ —á–∏—Å–ª–æ: {{ val|float }}</p>
            <p><strong>–û–∫—Ä—É–≥–ª–µ–Ω–æ –¥–æ 1 –∑–Ω–∞–∫–∞:</strong> {{ val|float|round(1) }}</p>

            <div class="button-nav">
                <a href="/" class="button button-light">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <a href="/macros_test/" class="button button-secondary">üß© –ö –õ–∞–±–µ 4</a>
                <a href="/tuple_calc/" class="button button-primary">üìä –ö –∑–∞–¥–∞–Ω–∏—é 2</a>
                <a href="/round_number/1.618/" class="button">‚ú® –î—Ä—É–≥–æ–µ —á–∏—Å–ª–æ (1.618)</a>
            </div>
        </div>
    {% endif %}

    <!-- ===== –õ–ê–ë–ê 4: –°–ò–ù–¢–ê–ö–°–ò–ß–ï–°–ö–ò–ï –ö–û–ù–°–¢–†–£–ö–¶–ò–ò ===== -->
    {% elif task == 'calc' or task == 'macros' %}
    <div class="lab-title" style="border-color: red;">
        <h1>–õ–∞–±–∞ 4: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h1>
    </div>

    {# ===== –ó–ê–î–ê–ù–ò–ï 1: –ö–ê–õ–¨–ö–£–õ–Ø–¢–û–† ===== #}
    {% if task == 'calc' %}
    <div class="task" style="border-color: blue;">
        <h2>–ó–∞–¥–∞–Ω–∏–µ 1: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (–≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ —à–∞–±–ª–æ–Ω–µ)</h2>
        <p>–í—ã—Ä–∞–∂–µ–Ω–∏–µ: <strong>{{ a }} {{ op }} {{ b }}</strong></p>

        {% if op == '+' %}
            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: {{ a + b }}</p>
        {% elif op == '-' %}
            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: {{ a - b }}</p>
        {% elif op == '*' %}
            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: {{ a * b }}</p>
        {% elif op == ':' %}
            {% if b == 0 %}
                <p style="color: red;">–û—à–∏–±–∫–∞: –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å!</p>
            {% else %}
                <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: {{ a / b }}</p>
            {% endif %}
        {% elif op == '**' %}
            <p>–†–µ–∑—É–ª—å—Ç–∞—Ç: {{ a ** b }}</p>
        {% else %}
            <p style="color: red;">–û—à–∏–±–∫–∞: –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è "{{ op }}"</p>
        {% endif %}

        <div class="button-nav">
            <a href="/" class="button button-light">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <a href="/macros_test/" class="button button-secondary">üß© –ö –∑–∞–¥–∞–Ω–∏—é 2</a>
            <p style="margin-top: 10px;"><small>–î—Ä—É–≥–∏–µ –ø—Ä–∏–º–µ—Ä—ã:
                <a href="/calc/10/:/2/">10:2</a> |
                <a href="/calc/5/:/0/">5:0 (–æ—à–∏–±–∫–∞)</a> |
                <a href="/calc/7.5/+/2.0/">7.5+2.0</a>
            </small></p>
        </div>
    </div>
    {% endif %}

    {# ===== –ó–ê–î–ê–ù–ò–ï 2: –ú–ê–ö–†–û–°–´ ===== #}
    {% if task == 'macros' %}
    <div class="task" style="border-color: green;">
        <h2>–ó–∞–¥–∞–Ω–∏–µ 2: –ú–∞–∫—Ä–æ—Å—ã</h2>

        {# –û–±—ä—è–≤–ª—è–µ–º –º–∞–∫—Ä–æ—Å—ã #}
        {% macro get_info(values, action, x, y) %}
        <div class="macros-box" style="border-color: blue;">
            <h3>–ú–∞–∫—Ä–æ—Å get_info (–≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç):</h3>
            <p>–°–ø–∏—Å–æ–∫ values: {{ values }}</p>
            <p>–î–µ–π—Å—Ç–≤–∏–µ action: {{ action }}</p>
            <p>–ß–∏—Å–ª–æ x: {{ x }}</p>
            <p>–ß–∏—Å–ª–æ y: {{ y }}</p>
        </div>
        {% endmacro %}

        {% macro search_info(values, x, y) %}
        <div class="macros-box" style="border-color: green;">
            <h3>–ú–∞–∫—Ä–æ—Å search_info (–ø—Ä–∏ search/find):</h3>
            <p>–ò—â–µ–º –≤ —Å–ø–∏—Å–∫–µ: {{ values }}</p>
            <p>–í—ã—á–∏—Å–ª–µ–Ω–∏—è: {{ x }} * {{ y }} = {{ x * y }}</p>
        </div>
        {% endmacro %}

        {% macro validate_data(values, x, y) %}
        <div class="macros-box" style="border-color: red;">
            <h3>–ú–∞–∫—Ä–æ—Å validate_data (–≤ –¥—Ä—É–≥–∏—Ö —Å–ª—É—á–∞—è—Ö):</h3>
            <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö:</p>
            <ul>
                <li>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤: {{ values|length }}</li>
                <li>X –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ? {% if x > 0 %}–î–∞{% else %}–ù–µ—Ç{% endif %}</li>
                <li>Y –±–æ–ª—å—à–µ 0? {% if y > 0 %}–î–∞{% else %}–ù–µ—Ç{% endif %}</li>
            </ul>
        </div>
        {% endmacro %}

        {# –í—ã–∑—ã–≤–∞–µ–º –º–∞–∫—Ä–æ—Å—ã #}
        {{ get_info(values, action, x, y) }}

        {% if action == "search" or action == "find" %}
            {{ search_info(values, x, y) }}
        {% else %}
            {{ validate_data(values, x, y) }}
        {% endif %}


        <div class="button-nav">
            <a href="/calc/7.5/+/2.0/" class="button button-primary">üìü –ö –∑–∞–¥–∞–Ω–∏—é 1</a>
            <a href="/" class="button button-light">üè† –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
            <a href="/circle_area/5.0/" class="button button-secondary">üìê –ö –õ–∞–±–µ 3</a>
            <a href="/macros_test/" class="button" onclick="alert('–ò–∑–º–µ–Ω–∏ action –≤ main.py –Ω–∞ other –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä')">üîÑ –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –º–∞–∫—Ä–æ—Å</a>
        </div>
    </div>
    {% endif %}

    {% endif %}

    {# ===== –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ (–µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ) ===== #}
    {% if not task and not r is defined and not numbers is defined and not val is defined %}
    <div class="lab-title">
        <h1>–§–ª–∞—Å–∫ –õ–∞–±—ã</h1>
    </div>

    <div class="task">
        <h2>–õ–∞–±–∞ 3: –í—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö —Å Jinja</h2>
        <div style="margin-bottom: 15px;">
            <a href="/circle_area/5.0/" class="button button-primary">üìê –ó–∞–¥–∞–Ω–∏–µ 1</a>
            <a href="/tuple_calc/" class="button button-primary">üìä –ó–∞–¥–∞–Ω–∏–µ 2</a>
            <a href="/round_number/3.14159/" class="button button-primary">üî¢ –ó–∞–¥–∞–Ω–∏–µ 3</a>
        </div>
        <ul>
            <li><a href="/circle_area/5.0/">–ó–∞–¥–∞–Ω–∏–µ 1: –ü–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ (—Ä–∞–¥–∏—É—Å=5)</a></li>
            <li><a href="/tuple_calc/">–ó–∞–¥–∞–Ω–∏–µ 2: –†–∞–±–æ—Ç–∞ —Å –∫–æ—Ä—Ç–µ–∂–µ–º</a></li>
            <li><a href="/round_number/3.14159/">–ó–∞–¥–∞–Ω–∏–µ 3: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ —á–∏—Å–ª–∞ (3.14159)</a></li>
        </ul>
    </div>

    <div class="task">
        <h2>–õ–∞–±–∞ 4: –°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</h2>

        <div style="margin-bottom: 15px;">
            <a href="/calc/7.5/+/2.0/" class="button button-primary">üìü –ó–∞–¥–∞–Ω–∏–µ 1</a>
            <a href="/macros_test/" class="button button-primary">üß© –ó–∞–¥–∞–Ω–∏–µ 2</a>
        </div>

        <ul>
            <li><a href="/calc/7.5/+/2.0/">–ó–∞–¥–∞–Ω–∏–µ 1: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (7.5 + 2.0)</a></li>
            <li><a href="/calc/10/:/2/">–ó–∞–¥–∞–Ω–∏–µ 1: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä (10 : 2)</a></li>
            <li><a href="/calc/5/:/0/">–ó–∞–¥–∞–Ω–∏–µ 1: –î–µ–ª–µ–Ω–∏–µ –Ω–∞ 0 (–æ—à–∏–±–∫–∞)</a></li>
            <li><a href="/macros_test/">–ó–∞–¥–∞–Ω–∏–µ 2: –ú–∞–∫—Ä–æ—Å—ã (action="search")</a></li>
        </ul>
    </div>

    <div class="task">
        <h3>–í—Å–µ –ª–∞–±—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ:</h3>
        <div>
            <a href="/hello" class="button button-light">üëã –õ–∞–±–∞ 1 (Hello World)</a>
            <a href="/another_page/" class="button button-light">üìÑ –õ–∞–±–∞ 1 (–î—Ä—É–≥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)</a>
            <a href="/contact/" class="button button-light">üìû –õ–∞–±–∞ 1 (–ö–æ–Ω—Ç–∞–∫—Ç—ã)</a>
            <a href="/calc/7.5/+/2.0/" class="button button-secondary">üßÆ –õ–∞–±–∞ 4 (–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä)</a>
            <a href="/macros_test/" class="button button-secondary">‚öôÔ∏è –õ–∞–±–∞ 4 (–ú–∞–∫—Ä–æ—Å—ã)</a>
        </div>
    </div>
    {% endif %}
</body>
</html>